<!DOCTYPE html>
<html>

<head th:replace="admin/components/head :: head"></head>

<body class="hold-transition skin-blue sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">

    <header th:replace="admin/components/header :: header"></header>

    <aside th:replace="admin/components/aside :: aside"></aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="margin-top: 50px">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>Danh sách kỹ năng</h1>
        </section>

        <!-- Main content -->
        <section class="content">

            <!-- Default box -->
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Bảng Dữ Liệu Với Các Tính Năng Đầy Đủ</h3>
                    <button class="btn btn-success pull-right" onclick="openAddSkillForm()">Thêm kỹ năng mới</button>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <div id="example1_wrapper" class="dataTables_wrapper form-inline dt-bootstrap">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="dataTables_length" id="example1_length">
                                    <label>Hiển thị
                                        <select name="example1_length" aria-controls="example1"
                                                class="form-control input-sm">
                                            <option value="10">10</option>
                                            <option value="25">25</option>
                                            <option value="50">50</option>
                                            <option value="100">100</option>
                                        </select> mục
                                    </label>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div id="example1_filter" class="dataTables_filter">
                                    <label>Tìm kiếm:
                                        <input type="search" class="form-control input-sm" placeholder=""
                                               aria-controls="example1">
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="filterSkillType">Lọc theo loại kỹ năng:</label>
                                    <select id="filterSkillType" class="form-control">
                                        <option value="">Tất cả</option>
                                        <option value="TECHNICAL_SKILL">TECHNICAL_SKILL</option>
                                        <option value="SOFT_SKILL">SOFT_SKILL</option>
                                        <option value="UNSPECIFIED">UNSPECIFIED</option>
                                    </select>
                                </div>
                                <table id="example1" class="table table-bordered table-striped dataTable" role="grid"
                                       aria-describedby="example1_info">
                                    <thead>
                                    <tr role="row">
                                        <th>Mã kỹ năng</th>
                                        <th>Tên kỹ năng</th>
                                        <th>Loại kỹ năng</th>
                                        <th>Mô tả kỹ năng</th>
                                        <th>Hành động</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="skill : ${skills}">
                                        <td th:text="${skill.getId()}"></td>
                                        <td th:text="${skill.getSkillName()}"></td>
                                        <td th:text="${skill.getSkillType()}"></td>
                                        <td th:text="${skill.getSkillDescription()}"></td>
                                        <td>
                                            <button class="btn btn-primary"
                                                    th:attr="onclick=|openEditSkillForm('${skill.getId()}', '${skill.getSkillName()}', '${skill.getSkillType()}', '${skill.getSkillDescription()}')|">
                                                Chỉnh sửa
                                            </button>
                                            <button class="btn btn-danger"
                                                    th:attr="onclick='confirmDelete(' + ${skill.getId()} + ')'">Xóa
                                            </button>
                                        </td>

                                    </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <th>Mã kỹ năng</th>
                                        <th>Tên kỹ năng</th>
                                        <th>Loại kỹ năng</th>
                                        <th>Mô tả kỹ năng</th>
                                        <th>Hành động</th>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-5">
                                <div class="dataTables_info" id="example1_info" role="status" aria-live="polite">Hiển
                                    thị từ 1 đến 10 trên tổng số 57 mục
                                </div>
                            </div>
                            <div class="col-sm-7">
                                <div class="dataTables_paginate paging_simple_numbers" id="example1_paginate">
                                    <ul class="pagination">
                                        <li class="paginate_button previous disabled" id="example1_previous"><a href="#"
                                                                                                                aria-controls="example1"
                                                                                                                data-dt-idx="0"
                                                                                                                tabindex="0">Trước</a>
                                        </li>
                                        <li class="paginate_button active"><a href="#" aria-controls="example1"
                                                                              data-dt-idx="1" tabindex="0">1</a></li>
                                        <li class="paginate_button "><a href="#" aria-controls="example1"
                                                                        data-dt-idx="2" tabindex="0">2</a></li>
                                        <li class="paginate_button next" id="example1_next"><a href="#"
                                                                                               aria-controls="example1"
                                                                                               data-dt-idx="7"
                                                                                               tabindex="0">Sau</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->

        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
</div>


<!-- Modal for Add Skill -->
<div id="addSkillModal" class="modal" style="display:none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <!-- Button to close the modal -->
                <button type="button" class="close" onclick="closeAddSkillForm()">&times;</button>
                <h4 class="modal-title">Thêm Kỹ Năng Mới</h4>
            </div>
            <div class="modal-body">
                <form id="addSkillForm" th:action="@{/admin/skill/add}" method="post">
                    <div class="form-group">
                        <label for="skillName">Tên kỹ năng:</label>
                        <input type="text" class="form-control" id="skillName" name="skillName"
                               placeholder="Nhập tên kỹ năng" required>
                    </div>
                    <div class="form-group">
                        <label for="skillType">Loại kỹ năng:</label>
                        <select id="skillType" class="form-control" name="skillType">
                            <option value="SOFT_SKILL">SOFT_SKILL</option>
                            <option value="TECHNICAL_SKILL">TECHNICAL_SKILL</option>
                            <option value="UNSPECIFIED">UNSPECIFIED</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="skillDescription">Mô tả kỹ năng:</label>
                        <textarea class="form-control" id="skillDescription" name="skillDescription"
                                  placeholder="Nhập mô tả kỹ năng"></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">Lưu</button>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Modal for Edit Skill -->
<div id="editSkillModal" class="modal" style="display:none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="closeEditSkillForm()">&times;</button>
                <h4 class="modal-title">Chỉnh Sửa Kỹ Năng</h4>
            </div>
            <div class="modal-body">
                <form id="editSkillForm" th:action="@{/admin/skill/update}" method="post">
                    <!-- Hidden input for skill ID -->
                    <input type="hidden" id="editSkillId" name="id">

                    <div class="form-group">
                        <label for="editSkillName">Tên kỹ năng:</label>
                        <input type="text" class="form-control" id="editSkillName" name="skillName" required>
                    </div>

                    <div class="form-group">
                        <label for="editSkillType">Loại kỹ năng:</label>
                        <select id="editSkillType" class="form-control" name="skillType">
                            <option value="SOFT_SKILL">SOFT_SKILL</option>
                            <option value="TECHNICAL_SKILL">TECHNICAL_SKILL</option>
                            <option value="UNSPECIFIED">UNSPECIFIED</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="editSkillDescription">Mô tả kỹ năng:</label>
                        <textarea class="form-control" id="editSkillDescription" name="skillDescription"></textarea>
                    </div>

                    <button type="submit" class="btn btn-success">Cập Nhật</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div th:replace="admin/components/scripts :: scripts"></div>
<script>
    function openAddSkillForm() {
        document.getElementById('addSkillModal').style.display = 'block';
    }

    function closeAddSkillForm() {
        document.getElementById('addSkillModal').style.display = 'none';
    }

    function openEditSkillForm(skillId, skillName, skillType, skillDescription) {
        document.getElementById('editSkillModal').style.display = 'block';
        document.getElementById('editSkillId').value = skillId;
        document.getElementById('editSkillName').value = skillName;
        document.getElementById('editSkillType').value = skillType;
        document.getElementById('editSkillDescription').value = skillDescription;
    }

    function closeEditSkillForm() {
        document.getElementById('editSkillModal').style.display = 'none';
    }

    function confirmDelete(skillId) {
        if (confirm('Bạn có chắc muốn xóa kỹ năng này không?')) {
            window.location.href = '/admin/skill/delete/' + skillId;
        }
    }

</script>
</body>

</html>
